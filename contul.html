<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Contul meu | Bucătarul Personal</title>
  <meta name="description" content="Autentificare clienți și înregistrare ca bucătar. Include consimțământ GDPR cu afișare termeni pe scurt." />
  <link rel="canonical" href="https://www.bucatarulpersonal.ro/cont.html" />

  <!-- Open Graph -->
  <meta property="og:title" content="Contul meu" />
  <meta property="og:description" content="Intră în cont sau înregistrează-te ca bucătar." />
  <meta property="og:url" content="https://www.bucatarulpersonal.ro/cont.html" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="/static/og-bucatarul-personal.jpg" />
  <meta name="theme-color" content="#0e5a43" />
  <meta name="color-scheme" content="light dark" />

  <!-- Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">

  <!-- ======= CONTUL MEU – CLIENT & BUCĂTAR ======= -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>
  :root{
    --verde:#0e5a43; --verde2:#0b4a36; --gri:#f6f7f9; --stroke:#e6ecef;
    --shadow:0 14px 44px rgba(0,0,0,.08); --radius:18px;
  }
  .acc-wrap{max-width:1100px;margin:40px auto;padding:0 16px;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  .acc-hero{background:linear-gradient(180deg,#f4fbf7 0%, transparent 100%);border:1px solid var(--stroke);border-radius:22px;padding:28px 22px;margin-bottom:16px}
  .acc-hero h1{margin:0 0 6px;font-size:42px;line-height:1.1;color:#173a2f}
  .acc-tabs{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin:14px 0}
  .acc-tab{padding:12px;border:1px solid var(--stroke);border-radius:999px;text-align:center;font-weight:800;color:#2a463d;background:#fff}
  .acc-tab.active{background:#e9f6f1;border-color:#cfe7df}
  .acc-grid{display:grid;grid-template-columns:1fr 1fr;gap:18px}
  @media (max-width:900px){ .acc-grid{grid-template-columns:1fr} }
  .card{border:1px solid var(--stroke);border-radius:var(--radius);background:#fff;box-shadow:var(--shadow)}
  .card .head{padding:14px 16px;border-bottom:1px solid var(--stroke);font-weight:800}
  .card .body{padding:18px}
  .form p{margin:0 0 14px}
  .form input[type="email"],
  .form input[type="password"],
  .form input[type="text"]{width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--stroke);background:#f8fbfc}
  .btn{display:inline-flex;align-items:center;gap:8px;border-radius:999px;border:1px solid #cfe0da;background:#fff;padding:10px 16px;cursor:pointer;font-weight:700}
  .btn-primary{background:var(--verde);border-color:transparent;color:#fff}
  .btn-ghost{background:#fff}
  .hint{font-size:13px;color:#5c6c66}
  .row{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
  .muted{color:#6a7a73}
  .error{color:#b42318;margin-top:8px}
  .success{color:#0e5a43;margin-top:8px}
  /* ====== LOOK ca în primul screenshot ====== */

/* Hero container mai “plinuț” + umbră */
.acc-hero{
  background: linear-gradient(180deg,#f2fbf6 0%, #ffffff 100%);
  border: 1px solid #e6ecef;
  border-radius: 24px;
  box-shadow: 0 22px 60px rgba(9,45,32,.08);
  padding: 28px 24px;
}

/* Tabs segmentate, pastilă, cu activ verde deschis */
.acc-tabs{ gap:14px; }
.acc-tab{
  background:#fff;
  border:1px solid #d8e6e1;
  border-radius: 999px;
  padding: 14px 10px;
  font-weight: 800;
  color:#2a463d;
}
.acc-tab.active{
  background:#e9f5ef;
  border-color:#cde7df;
  box-shadow: inset 0 0 0 1px #cfe7df;
}

/* Grid 2 coloane cu spațiu generos + umbre “card” */
.acc-grid{ gap: 22px; }
.card{
  border:1px solid #e6ecef;
  border-radius: 22px;
  box-shadow: 0 18px 48px rgba(0,0,0,.08);
  overflow:hidden; /* pentru head cu fundal */
}
.card .head{
  padding:16px 18px;
  border-bottom:1px solid #e9efee;
  font-weight:800;
}
/* Head cu fundal discret pe cardul din dreapta */
.card .head.is-soft{
  background:#f5faf7;
}

/* Inputs mai mari, rotunjite, ca în mock */
.form input[type="email"],
.form input[type="password"],
.form input[type="text"]{
  background:#f4faf7;
  border:1px solid #e3ece8;
  border-radius: 14px;
  padding: 14px 16px;
  font-size: 16px;
}

/* Butoane */
.btn{ border-radius:999px; padding:12px 18px; }
.btn-primary{
  background:#0e5a43; color:#fff; border-color:transparent;
  box-shadow: 0 10px 24px rgba(14,90,67,.22);
}
.btn-primary:hover{ filter:brightness(.98) }

/* Link “Ai uitat parola?” stil pastilă */
.pill-link{
  display:inline-flex; align-items:center; gap:8px;
  padding:10px 14px; border-radius:999px;
  background:#fff; border:1px solid #dfe9e5;
  box-shadow:0 8px 22px rgba(0,0,0,.06);
  color:#0e5a43; text-decoration:none;
}

/* “Arată” parola în pastilă mică */
.btn-ghost{ border:1px solid #e1e9e6; padding:8px 12px }

/* Spațiere generală la fel ca în mock */
.form p{ margin: 0 0 16px }
.row{ gap:12px }
</style>

<div class="acc-wrap">
  <!-- Intro / headline -->
  <div class="acc-hero">
    <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap">
      <span class="btn btn-ghost" aria-hidden="true">Premium</span>
      <span class="btn btn-ghost" aria-hidden="true">Verificați</span>
      <span class="btn btn-ghost" aria-hidden="true">Contract & Factură</span>
    </div>
    <h1>Acces rapid la comenzi, rezervări și documente.</h1>
    <div class="hint">Conectează-te ca <strong>Client</strong> sau <strong>Bucătar</strong>. Integrare ușoară cu facturare & calendar.</div>

    <!-- Tabs -->
    <div class="acc-tabs" role="tablist" aria-label="Tip cont">
      <button class="acc-tab active" id="tab-client" aria-selected="true" aria-controls="panel-client">Client</button>
      <button class="acc-tab" id="tab-chef" aria-selected="false" aria-controls="panel-chef">Înregistrare Bucătar</button>
    </div>
  </div>

  <div class="acc-grid">
    <!-- Panel Client (Login) -->
    <section id="panel-client" class="card" role="tabpanel" aria-labelledby="tab-client">
      <div class="head"><i class="fa-solid fa-right-to-bracket"></i> Autentificare</div>
      <div class="body">
        <form id="login" class="form" novalidate>
          <p><label>Email<br><input name="email" type="email" placeholder="nume@exemplu.com" required></label></p>
          <p>
            <label>Parolă<br>
              <span class="row">
                <input id="login-pass" name="pass" type="password" required>
                <button class="btn btn-ghost" id="toggle-login-pass" type="button" aria-controls="login-pass">arată</button>
              </span>
            </label>
          </p>
          <div class="row" style="margin:8px 0 14px">
            <label class="hint"><input id="remember" type="checkbox"> Ține-mă minte</label>
           <a id="forgot" class="pill-link" href="#">Ai uitat parola?</a>

          </div>
          <button class="btn btn-primary" type="submit"><i class="fa-solid fa-right-to-bracket"></i> Intră în cont</button>
          <div id="login-msg" class="error" role="alert" aria-live="polite"></div>
        </form>
      </div>
    </section>

    <!-- Panel Chef (CTA + formular de signup toggle) -->
    <section id="panel-chef" class="card" role="tabpanel" aria-labelledby="tab-chef" hidden>
      <div class="head">Înregistrează-te ca Bucătar</div>
      <div class="body">
        <p class="muted">Vrei să colaborezi cu noi? Creează-ți cont de bucătar și primește cereri pentru evenimente.</p>
        <button id="show-signup" class="btn btn-primary"><i class="fa-solid fa-user-plus"></i> Înregistrează-te ca bucătar</button>

        <!-- Formularul apare la click -->
        <form id="signup" class="form" style="margin-top:16px;display:none" novalidate>
          <p><label>Nume<br><input name="name" required></label></p>
          <p><label>Email<br><input name="email" type="email" required></label></p>
          <p>
            <label>Parolă<br>
              <span class="row">
                <input id="signup-pass" name="pass" type="password" minlength="6" required>
                <button class="btn btn-ghost" id="toggle-signup-pass" type="button" aria-controls="signup-pass">arată</button>
              </span>
            </label>
          </p>
          <button class="btn btn-primary" type="submit"><i class="fa-solid fa-check"></i> Creează cont</button>
          <div id="signup-msg" class="error" role="alert" aria-live="polite"></div>
        </form>

        <p class="hint" style="margin-top:12px">Ai deja cont? Autentifică-te din secțiunea <strong>Autentificare</strong>.</p>
      </div>
    </section>
  </div>
</div>

<!-- FontAwesome pentru iconițe (opțional; dacă îl ai deja, poți elimina) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Firebase + logică -->
<script type="module">
  // Firebase
  import { initializeApp, getApps } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile, onAuthStateChanged, sendPasswordResetEmail, setPersistence, browserLocalPersistence, browserSessionPersistence } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
  import { getFirestore, doc, setDoc, getDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  // >>> PUNE CONFIG-UL TĂU REAL AICI <<<
  const firebaseConfig = {
    apiKey: "AIzaSyCRFbgtajpu2O44HWXAWXC-VPOOQ-Cx7Dw",
  authDomain: "bucatarul-personal.firebaseapp.com",
  projectId: "bucatarul-personal",
  storageBucket: "bucatarul-personal.firebasestorage.app",
  messagingSenderId: "140628829497",
  appId: "1:140628829497:web:8e639aaf2906c85473f4e8",
  measurementId: "G-TQFMGTGPP3"
  };

  const app  = getApps().length ? getApps()[0] : initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db   = getFirestore(app);

  // Tabs
  const tabClient = document.getElementById('tab-client');
  const tabChef   = document.getElementById('tab-chef');
  const panelClient = document.getElementById('panel-client');
  const panelChef   = document.getElementById('panel-chef');

  function showTab(which){
    const isClient = which === 'client';
    tabClient.classList.toggle('active', isClient);
    tabChef.classList.toggle('active', !isClient);
    panelClient.hidden = !isClient;
    panelChef.hidden   =  isClient;
    tabClient.setAttribute('aria-selected', String(isClient));
    tabChef.setAttribute('aria-selected', String(!isClient));
  }
  tabClient.addEventListener('click', ()=> showTab('client'));
  tabChef.addEventListener('click',   ()=> showTab('chef'));

  // Toggle parole
  const toggle1 = document.getElementById('toggle-login-pass');
  const pass1   = document.getElementById('login-pass');
  toggle1.addEventListener('click', ()=>{ pass1.type = pass1.type==='password'?'text':'password'; });

  const toggle2 = document.getElementById('toggle-signup-pass');
  const pass2   = document.getElementById('signup-pass');
  toggle2.addEventListener('click', ()=>{ pass2.type = pass2.type==='password'?'text':'password'; });

  // Arată formularul de signup la click
  const showSignup = document.getElementById('show-signup');
  const signupForm = document.getElementById('signup');
  showSignup.addEventListener('click', ()=> { signupForm.style.display = 'block'; showSignup.style.display='none'; });

  // Redirect dacă e deja logat (și e bucătar)
  onAuthStateChanged(auth, async (user)=>{
    if(!user) return;
    try{
      const snap = await getDoc(doc(db, "users", user.uid));
      const role = snap.exists() ? snap.data().role : null;
      if(role === "chef"){ location.href = "dashboard-bucatar.html"; }
    }catch(e){ console.warn(e); }
  });

  // Login client/bucătar (dacă e chef -> dashboard chef)
  const login = document.getElementById('login');
  const loginMsg = document.getElementById('login-msg');
  login.addEventListener('submit', async (e)=>{
    e.preventDefault();
    loginMsg.textContent = '';
    const f = new FormData(login);
    const email = f.get('email').trim();
    const pass  = f.get('pass');

    // Ține-mă minte
    const remember = document.getElementById('remember').checked;
    await setPersistence(auth, remember ? browserLocalPersistence : browserSessionPersistence);

    try{
      const cred = await signInWithEmailAndPassword(auth, email, pass);
      const snap = await getDoc(doc(db, "users", cred.user.uid));
      const role = snap.exists() ? snap.data().role : null;
      if(role === "chef") location.href = "dashboard-bucatar.html";
      else location.href = "/"; // schimbă dacă ai dashboard pentru clienți
    }catch(err){
      loginMsg.textContent = err.message;
    }
  });

  // Reset parolă
  document.getElementById('forgot').addEventListener('click', async (e)=>{
    e.preventDefault();
    const email = (new FormData(login)).get('email');
    if(!email){ loginMsg.textContent = "Introdu adresa de email pentru resetare."; return; }
    try{
      await sendPasswordResetEmail(auth, String(email));
      loginMsg.className = 'success';
      loginMsg.textContent = "Ți-am trimis email pentru resetarea parolei.";
    }catch(err){
      loginMsg.className = 'error';
      loginMsg.textContent = err.message;
    }
  });

  // Signup ca BUCĂTAR (rol: chef)
  const signupMsg = document.getElementById('signup-msg');
  signupForm.addEventListener('submit', async (e)=>{
    e.preventDefault();
    signupMsg.textContent = '';
    const f = new FormData(signupForm);
    const name  = f.get('name').trim();
    const email = f.get('email').trim();
    const pass  = f.get('pass');

    try{
      const cred = await createUserWithEmailAndPassword(auth, email, pass);
      await updateProfile(cred.user, { displayName: name });
      await setDoc(doc(db, "users", cred.user.uid), {
        uid: cred.user.uid, name, email, role: "chef", createdAt: serverTimestamp()
      });
      location.href = "dashboard-bucatar.html";
    }catch(err){
      signupMsg.textContent = err.message;
    }
  });
  </script>
</body>
</html>

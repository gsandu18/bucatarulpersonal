<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Contul meu | CHEF PRIVÉ · Bucătarul Personal</title>
  <meta name="description" content="Autentificare Client/Bucătar și înregistrare ca Bucătar pe CHEF PRIVÉ — Bucătarul Personal." />
  <link rel="canonical" href="https://www.bucatarulpersonal.ro/contul_meu" />
  <meta property="og:title" content="Contul meu | CHEF PRIVÉ" />
  <meta property="og:description" content="Intră în cont (Client/Bucătar) sau înregistrează-te ca bucătar." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="/static/og-bucatarul-personal.jpg" />
  <meta name="theme-color" content="#1C1C1C" />
  <meta name="color-scheme" content="light dark" />

  <!-- Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <style>
    :root{
      /* Noir + Gold */
      --noir:#1C1C1C; --noir-2:#0F0F10;
      --gold:#D4AF37; --gold-2:#C1991D;
      --ink:#1C1C1C; --muted:#7e848a;
      --line:#E9E9EC; --card:#fff; --bg:#fff;
      --shadow:0 18px 50px rgba(0,0,0,.12);
      --max:1160px; --radius:14px; --radius-lg:22px;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--ink);background:var(--bg);line-height:1.55}
    img{max-width:100%;display:block;height:auto}
    a{color:inherit;text-decoration:none}
    a:focus-visible,button:focus-visible,input:focus-visible,select:focus-visible,textarea:focus-visible{outline:3px solid var(--gold);outline-offset:3px;border-radius:10px}
    .container{width:min(var(--max),calc(100% - 24px));margin:0 auto}

    /* ====== HEADER (Noir+Gold) ====== */
    header.site{position:sticky;top:0;z-index:60;background:#fff;border-bottom:1px solid var(--line)}
    header.site::before{content:"";position:absolute;left:0;top:0;height:4px;width:100%;background:var(--gold)}
    .nav{display:flex;align-items:center;gap:18px;min-height:80px}
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{height:34px}
    .stack{display:grid;line-height:1}
    .stack b{letter-spacing:.12em;font-weight:800}
    .stack small{color:#8a9096;font-weight:700}
    nav.links{display:flex;gap:34px;align-items:center;margin-left:32px;flex:1}
    nav.links a{font-weight:800}
    nav.links a:hover{opacity:.8}
    .lang-pill{margin-left:auto;display:inline-flex;align-items:center;gap:10px;padding:10px 14px;border:1px solid var(--line);border-radius:14px;background:#fff;font-weight:800}
    .btn-nav{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border:1px solid var(--line);border-radius:999px;background:#fff;font-weight:800}
    .burger{display:none;border:1px solid var(--line);background:#fff;border-radius:12px;width:44px;height:44px;align-items:center;justify-content:center}
    .burger svg{width:22px;height:22px;stroke:currentColor;stroke-width:2;fill:none}
    @media(max-width:1024px){ nav.links,.lang-pill{display:none} .burger{display:inline-flex} }

    /* Drawer mobil */
    .drawer-back{position:fixed;inset:0;background:rgba(0,0,0,.45);backdrop-filter:blur(3px);display:none;z-index:70}
    .drawer-back.active{display:block}
    .drawer{position:absolute;right:0;top:0;height:100%;width:min(420px,92%);background:#fff;border-left:1px solid var(--line);padding:18px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px}
    .drawer a{padding:12px 6px;border-bottom:1px solid var(--line);font-weight:800}
    .drawer .btn-nav{margin-top:auto;justify-content:center}

    /* ====== PAGE ====== */
    .wrap{max-width:980px;margin:28px auto;padding:0 12px}
    .hero{
      background:linear-gradient(180deg,#fff,#fafafa);
      border:1px solid var(--line); border-radius:22px; box-shadow:var(--shadow);
      padding:26px 20px; margin-bottom:18px
    }
    .hero h1{font-family:"Playfair Display",serif;font-size:clamp(28px,4.2vw,42px);line-height:1.08;margin:8px 0 6px}
    .hero .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid var(--line);background:#fff;font-weight:800}
    .muted{color:var(--muted)}

    .grid{display:grid;grid-template-columns:1fr 1fr;gap:18px}
    @media(max-width:900px){ .grid{grid-template-columns:1fr} }

    .card{background:#fff;border:1px solid var(--line);border-radius:22px;box-shadow:var(--shadow);overflow:hidden}
    .card .head{padding:14px 16px;border-bottom:1px solid var(--line);font-weight:800}
    .card .head.soft{background:#fafafa}
    .card .body{padding:18px}

    label{display:block;font-weight:700;margin-bottom:8px}
    input,select{width:100%;height:48px;padding:10px 14px;border:1px solid #E4E6EA;border-radius:12px;background:#fbfbfd}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .notice{margin-top:10px;padding:10px 14px;border-radius:12px;border:1px solid #e6efe8;background:#f3fbf6;color:#0f3e2f}
    .notice.error{background:#fff6f6;border-color:#f4c4c2;color:#a12618}
    .notice:empty{display:none}

    .btn{display:inline-flex;align-items:center;gap:10px;padding:12px 16px;border-radius:999px;border:1px solid var(--line);background:#fff;font-weight:800;cursor:pointer}
    .btn.primary{background:var(--gold);border-color:var(--gold);color:#141414;box-shadow:0 10px 26px rgba(212,175,55,.22)}
    .btn.primary:hover{background:var(--gold-2)}
    .btn.ghost{background:#fff;border-color:#dfe2e6}

    /* ====== FOOTER ====== */
    footer.site{background:#f7f7f8;color:#1c1c1c;border-top:4px solid var(--gold);margin-top:48px}
    .foot{width:min(var(--max),calc(100% - 24px));margin:0 auto;padding:34px 0;display:grid;grid-template-columns:2fr 1fr 1fr 1.2fr;gap:28px}
    @media(max-width:980px){.foot{grid-template-columns:1fr 1fr}}
    @media(max-width:640px){.foot{grid-template-columns:1fr}}
    .foot h4{margin:0 0 10px}
    .foot ul{list-style:none;margin:10px 0 0;padding:0;display:grid;gap:8px}
    .mini{display:flex;align-items:center;gap:10px}
    .mini img{height:34px}
    .lead{color:#8c9398}
    .legal{width:min(var(--max),calc(100% - 24px));margin:0 auto;padding:14px 0 20px;border-top:1px solid #e6e6ea;color:#8d9297;text-align:center;font-size:14px}
  </style>
</head>
<body>

  <!-- ===== Header ===== -->
  <header class="site">
    <div class="container nav">
      <a class="brand" href="/" aria-label="Acasă">
        <img src="/static/logo-chef-prive.svg" alt="CHEF PRIVÉ">
        <span class="stack"><b>CHEF PRIVÉ</b><small>Bucătarul Personal</small></span>
      </a>

      <nav class="links" aria-label="Navigație principală">
        <a href="/despre-noi.html">Despre noi</a>
        <a href="/bucatarii.html">Bucătarii noștri</a>
        <a href="/servicii.html">Servicii</a>
        <a href="/blog.html">Blog</a>
        <a class="btn-nav" href="/contul_meu" aria-current="page"><i class="fa-solid fa-user"></i> Contul meu</a>
      </nav>

      <span class="lang-pill"><i class="fa-solid fa-globe"></i> RO</span>

      <button id="burger" class="burger" aria-label="Meniu mobil">
        <svg viewBox="0 0 24 24"><path d="M4 7h16M4 12h16M4 17h16"/></svg>
      </button>
    </div>

    <!-- Drawer mobil -->
    <div id="drawer-back" class="drawer-back" aria-hidden="true">
      <div class="drawer" role="dialog" aria-modal="true" aria-label="Meniu">
        <a href="/despre-noi.html">Despre noi</a>
        <a href="/bucatarii.html">Bucătării noștri</a>
        <a href="/servicii.html">Servicii</a>
        <a href="/blog.html">Blog</a>
        <a href="/contul_meu">Contul meu</a>
        <button id="drawer-close" class="btn-nav"><i class="fa-solid fa-xmark"></i> Închide</button>
      </div>
    </div>
  </header>

  <!-- ===== Conținut ===== -->
  <main class="wrap">
    <section class="hero">
      <div class="chips" aria-hidden="true">
        <span class="chip">Premium</span>
        <span class="chip">Verificați</span>
        <span class="chip">Contract & Factură</span>
      </div>
      <h1>Acces rapid la comenzi, rezervări și documente</h1>
      <p class="muted">Conectează-te ca <strong>Client</strong> sau <strong>Bucătar</strong>. Integrare ușoară cu facturare & calendar.</p>
    </section>

    <div class="grid">
      <!-- Autentificare -->
      <section id="panel-client" class="card" role="region" aria-label="Autentificare">
        <div class="head"><i class="fa-solid fa-right-to-bracket"></i> Autentificare</div>
        <div class="body">
          <form id="login" class="form" novalidate>
            <p><label>Rol
              <select id="login-role" name="role">
                <option value="client">Client</option>
                <option value="chef">Bucătar</option>
              </select>
            </label></p>
            <p><label>Email
              <input name="email" type="email" placeholder="nume@exemplu.com" required>
            </label></p>
            <p><label>Parolă
              <span class="row">
                <input id="login-pass" name="pass" type="password" required>
                <button class="btn ghost" id="toggle-login-pass" type="button" aria-controls="login-pass">arată</button>
              </span>
            </label></p>
            <div class="row" style="margin:8px 0 18px">
              <label class="muted"><input id="remember" type="checkbox"> Ține-mă minte</label>
              <a id="forgot" href="#" class="btn ghost" style="padding:8px 12px;height:auto;border-radius:999px">Ai uitat parola?</a>
            </div>
            <button class="btn primary" type="submit"><i class="fa-solid fa-right-to-bracket"></i> Intră în cont</button>
            <div id="login-ok"  class="notice" role="status" aria-live="polite"></div>
            <div id="login-msg" class="notice error" role="alert" aria-live="polite"></div>
          </form>
        </div>
      </section>

      <!-- Înregistrare bucătar (vizibil permanent) -->
      <section id="panel-chef" class="card" role="region" aria-label="Înregistrare Bucătar">
        <div class="head soft">Înregistrează-te ca Bucătar</div>
        <div class="body">
          <p class="muted" style="margin-top:0">Creează-ți cont și primește cereri pentru evenimente.</p>
          <form id="signup" class="form" novalidate>
            <p><label>Nume<input name="name" required></label></p>
            <p><label>Email<input name="email" type="email" required></label></p>
            <p><label>Parolă
              <span class="row">
                <input id="signup-pass" name="pass" type="password" minlength="6" required>
                <button class="btn ghost" id="toggle-signup-pass" type="button" aria-controls="signup-pass">arată</button>
              </span>
            </label></p>
            <button class="btn primary" type="submit"><i class="fa-solid fa-check"></i> Creează cont</button>
            <div id="signup-msg" class="notice" role="status" aria-live="polite"></div>
          </form>
          <p class="muted" style="margin-top:12px">Ai deja cont? Autentifică-te în panoul din stânga.</p>
        </div>
      </section>
    </div>
  </main>

  <!-- ===== Footer ===== -->
  <footer class="site">
    <div class="foot">
      <div>
        <div class="mini">
          <img src="/static/logo-chef-prive-mark.svg" alt="Chef Privé">
          <div><strong>CHEF PRIVÉ</strong><br><span class="muted">Private Chef Services</span></div>
        </div>
        <p class="lead" style="margin:14px 0 0">Servicii premium de chef personal pentru evenimente private și corporate în România și Italia.</p>
      </div>
      <div>
        <h4>Companie</h4>
        <ul>
          <li><a href="/despre-noi.html">Despre noi</a></li>
          <li><a href="/bucatarii.html">Bucătarii noștri</a></li>
          <li><a href="/servicii.html">Servicii</a></li>
          <li><a href="/blog.html">Blog</a></li>
        </ul>
      </div>
      <div>
        <h4>Legal</h4>
        <ul>
          <li><a href="/termeni.html">Termeni & Condiții</a></li>
          <li><a href="/confidentialitate.html">Confidențialitate</a></li>
          <li><a href="/cookies.html">Cookie-uri</a></li>
        </ul>
      </div>
      <div>
        <h4>Contact</h4>
        <ul>
          <li><a href="tel:+40772893476">0772 893 476</a></li>
          <li><a href="mailto:contact@bucatarulpersonal.ro">contact@bucatarulpersonal.ro</a></li>
          <li>RO & IT</li>
        </ul>
      </div>
    </div>
    <div class="legal">© <span id="year"></span> CHEF PRIVÉ • Toate drepturile rezervate</div>
  </footer>

  <!-- ===== JS: meniu mobil + UI ===== -->
  <script>
    // year
    document.getElementById('year').textContent = new Date().getFullYear();

    // drawer
    (()=>{
      const b = document.getElementById('burger');
      const back = document.getElementById('drawer-back');
      const x = document.getElementById('drawer-close');
      if(!b||!back||!x) return;
      b.onclick = ()=>{ back.classList.add('active'); document.body.style.overflow='hidden'; };
      x.onclick = ()=>{ back.classList.remove('active'); document.body.style.overflow=''; };
      back.addEventListener('click', e=>{ if(e.target===back){ x.click(); }});
      window.addEventListener('resize',()=>{ if(window.innerWidth>1024) x.click(); });
    })();
  </script>

  <!-- ===== Firebase + logică ===== -->
  <script type="module">
    import { initializeApp, getApps } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import {
      getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword,
      updateProfile, onAuthStateChanged, sendPasswordResetEmail,
      setPersistence, browserLocalPersistence, browserSessionPersistence
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
    import { getFirestore, doc, setDoc, getDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCRFbgtajpu2O44HWXAWXC-VPOOQ-Cx7Dw",
      authDomain: "bucatarul-personal.firebaseapp.com",
      projectId: "bucatarul-personal",
      storageBucket: "bucatarul-personal.appspot.com",
      messagingSenderId: "140628829497",
      appId: "1:140628829497:web:8e639aaf2906c85473f4e8",
      measurementId: "G-TQFMGTGPP3"
    };

    const app = getApps().length ? getApps()[0] : initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db   = getFirestore(app);

    // Toggle parole
    document.getElementById('toggle-login-pass')?.addEventListener('click', ()=>{
      const el = document.getElementById('login-pass'); el.type = el.type==='password'?'text':'password';
    });
    document.getElementById('toggle-signup-pass')?.addEventListener('click', ()=>{
      const el = document.getElementById('signup-pass'); el.type = el.type==='password'?'text':'password';
    });

    // Auto-redirect dacă e deja logat
    onAuthStateChanged(auth, async (user)=>{
      if(!user) return;
      try{
        const snap = await getDoc(doc(db, "users", user.uid));
        const role = snap.exists() ? snap.data().role : null;
        location.href = (role === "chef") ? "dashboard-bucatar.html" : "dashboard-client.html";
      }catch(e){ console.warn(e); }
    });

    // Login
    const login    = document.getElementById('login');
    const loginMsg = document.getElementById('login-msg');
    const loginOk  = document.getElementById('login-ok');

    login?.addEventListener('submit', async (e)=>{
      e.preventDefault();
      loginMsg.textContent=''; loginOk.textContent='';
      const f = new FormData(login);
      const email = String(f.get('email')||'').trim();
      const pass  = f.get('pass');
      const pick  = f.get('role');

      const remember = document.getElementById('remember')?.checked;
      await setPersistence(auth, remember ? browserLocalPersistence : browserSessionPersistence);

      try{
        const cred = await signInWithEmailAndPassword(auth, email, pass);
        const snap = await getDoc(doc(db, "users", cred.user.uid));
        const role = snap.exists() ? snap.data().role : pick;

        loginOk.textContent = (role === "chef")
          ? "Autentificat! Te ducem în Dashboard Bucătar…"
          : "Autentificat! Te ducem în Dashboard Client…";

        setTimeout(()=>{ location.href = (role === "chef") ? "dashboard-bucatar.html" : "dashboard-client.html"; }, 900);
      }catch(err){ loginMsg.textContent = err.message; }
    });

    // Reset parolă
    document.getElementById('forgot')?.addEventListener('click', async (e)=>{
      e.preventDefault();
      const email = (new FormData(login)).get('email');
      if(!email){ loginMsg.textContent="Introdu adresa de email pentru resetare."; return; }
      try{
        await sendPasswordResetEmail(auth, String(email));
        loginOk.textContent="Ți-am trimis email pentru resetarea parolei.";
      }catch(err){ loginMsg.textContent = err.message; }
    });

    // Signup chef
    const signup    = document.getElementById('signup');
    const signupMsg = document.getElementById('signup-msg');

    signup?.addEventListener('submit', async (e)=>{
      e.preventDefault();
      signupMsg.className='notice';
      signupMsg.textContent='Se procesează…';

      const f = new FormData(signup);
      const name  = String(f.get('name')||'').trim();
      const email = String(f.get('email')||'').trim();
      const pass  = f.get('pass');

      try{
        const cred = await createUserWithEmailAndPassword(auth, email, pass);
        await updateProfile(cred.user, { displayName:name });
        await setDoc(doc(db, "users", cred.user.uid), {
          uid: cred.user.uid, name, email, role:"chef", createdAt: serverTimestamp()
        });

        signupMsg.className='notice';
        signupMsg.textContent='Mulțumim! Ți-am creat contul de bucătar. Te redirecționăm…';
        setTimeout(()=>{ location.href="dashboard-bucatar.html"; }, 1100);
      }catch(err){
        signupMsg.className='notice error';
        signupMsg.textContent = err.message;
      }
    });
  </script>
</body>
</html>

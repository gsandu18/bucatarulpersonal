<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Bucătarii noștri – Filtrare oraș</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
<style>
  :root{
    --rubin:#0e5a43; --line:#e7ecef; --ink:#172026; --muted:#6b7580;
    --bg:#fff; --shadow:0 14px 40px rgba(0,0,0,.12); --radius:18px;
  }
  *{box-sizing:border-box} html,body{margin:0}
  body{font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:var(--ink); background:#fff}
  .container{width:min(1100px,94%); margin:0 auto}

  /* Bară filtre top */
  .filters-bar{position:sticky; top:0; z-index:20; background:#fff; border-bottom:1px solid var(--line)}
  .filters-wrap{display:flex; align-items:center; gap:12px; padding:10px 0}
  .search{flex:1; display:flex; align-items:center; gap:8px; border:1px solid var(--line); border-radius:999px; padding:10px 14px}
  .search input{border:0; outline:0; width:100%; font:inherit}
  .btn{display:inline-flex; align-items:center; gap:10px; padding:10px 14px; border-radius:12px; border:1px solid var(--line); background:#fff; cursor:pointer}
  .btn-primary{background:var(--rubin); color:#fff; border-color:transparent}
  .btn-icon{width:44px; height:44px; justify-content:center}
  .chips{display:flex; gap:10px; flex-wrap:wrap; padding:10px 0 14px}
  .chip{padding:9px 14px; border-radius:999px; border:1px solid var(--line); background:#fff; cursor:pointer; user-select:none; white-space:nowrap; font-weight:600}
  .chip.active{border-color:var(--rubin); color:var(--rubin); background:#ecf6f1}

  /* Off-canvas sheet (mobil) */
  .sheet-overlay{position:fixed; inset:0; background:rgba(0,0,0,.45); display:none}
  .sheet{position:fixed; right:0; top:0; height:100%; width:min(420px,92%); background:#fff; box-shadow:var(--shadow); padding:18px; display:flex; flex-direction:column; gap:14px; transform:translateX(100%); transition:transform .25s ease}
  .sheet-head{display:flex; justify-content:space-between; align-items:center}
  .sheet.active{transform:none} .sheet-overlay.active{display:block}
  @media(min-width: 860px){ .btn-filters{display:none} .sheet, .sheet-overlay{display:none !important} }

  /* Listă carduri */
  #resultsTop{height:1px}
  .grid{display:grid; grid-template-columns:repeat(3,1fr); gap:16px; margin:14px 0 24px}
  @media(max-width:1000px){ .grid{grid-template-columns:repeat(2,1fr)} }
  @media(max-width:640px){ .grid{grid-template-columns:1fr} }
  .card{border:1px solid var(--line); border-radius:var(--radius); overflow:hidden; background:#fff; box-shadow:var(--shadow)}
  .photo{aspect-ratio:1/1; background:#eef3f0}
  .photo img{width:100%; height:100%; object-fit:cover}
  .body{padding:14px}
  .muted{color:var(--muted)}
  .rating{display:flex; align-items:center; gap:6px; color:#f5b301; margin:6px 0}
  .tags{display:flex; flex-wrap:wrap; gap:8px}
  .tag{border:1px solid var(--line); border-radius:999px; padding:6px 10px; font-size:12px}
  .actions{display:flex; gap:10px; margin-top:12px}
  .btn-outline{border-color:var(--rubin); color:var(--rubin)}
  .btn-outline:hover{background:var(--rubin); color:#fff}
</style>
</head>
<body>

<!-- FILTRE TOP -->
<div class="filters-bar">
  <div class="container">
    <div class="filters-wrap">
      <div class="search">
        <i class="fa-solid fa-magnifying-glass"></i>
        <input id="q" type="text" placeholder="Caută nume, stil culinar, etichete…">
      </div>
      <button id="btnOpenFilters" class="btn btn-icon btn-filters" aria-label="Deschide filtre"><i class="fa-solid fa-sliders"></i></button>
      <button id="btnReset" class="btn" title="Resetează"><i class="fa-solid fa-rotate-left"></i> Resetează</button>
    </div>

    <!-- chips orase (vizibil pe desktop) -->
    <div id="citiesChips" class="chips" aria-label="Alege oraș">
      <button class="chip active" data-city="all">Toate orașele</button>
      <button class="chip" data-city="brasov">Brașov</button>
      <button class="chip" data-city="bucuresti">București</button>
      <button class="chip" data-city="cluj">Cluj-Napoca</button>
      <button class="chip" data-city="constanta">Constanța</button>
      <button class="chip" data-city="iasi">Iași</button>
      <button class="chip" data-city="oradea">Oradea</button>
      <button class="chip" data-city="sibiu">Sibiu</button>
      <button class="chip" data-city="timisoara">Timișoara</button>
    </div>
  </div>
</div>

<!-- OFF-CANVAS FILTRE (mobil) -->
<div id="sheetOverlay" class="sheet-overlay"></div>
<aside id="filterSheet" class="sheet" aria-label="Filtre">
  <div class="sheet-head">
    <strong>Filtre</strong>
    <button id="btnCloseFilters" class="btn"><i class="fa-solid fa-xmark"></i> Închide</button>
  </div>
  <div>
    <div style="font-weight:700; margin:8px 0 6px">Oraș</div>
    <div id="citiesChipsMobile" class="chips">
      <!-- aceleași valori ca sus -->
      <button class="chip active" data-city="all">Toate orașele</button>
      <button class="chip" data-city="brasov">Brașov</button>
      <button class="chip" data-city="bucuresti">București</button>
      <button class="chip" data-city="cluj">Cluj-Napoca</button>
      <button class="chip" data-city="constanta">Constanța</button>
      <button class="chip" data-city="iasi">Iași</button>
      <button class="chip" data-city="oradea">Oradea</button>
      <button class="chip" data-city="sibiu">Sibiu</button>
      <button class="chip" data-city="timisoara">Timișoara</button>
    </div>
  </div>
</aside>

<!-- ANCORĂ TOP LISTĂ -->
<div id="resultsTop"></div>

<!-- LISTĂ CARDURI -->
<main class="container">
  <div id="grid" class="grid">
    <!-- EXEMPLU CARDURI (setează data-city corect) -->
    <article class="card" data-city="bucuresti" data-tags="fine romanesc seafood" data-name="valeriu">
      <div class="photo"><img src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?q=80&w=800&auto=format&fit=crop" alt="Valeriu"></div>
      <div class="body">
        <h3 style="margin:0 0 4px">Valeriu <span class="chip" style="margin-left:6px">Verificat</span></h3>
        <div class="muted">București • Fine Dining & Românească • 12+ ani</div>
        <div class="rating"><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-stroke"></i><strong>4.9</strong></div>
        <div class="tags"><span class="tag">Fine Dining</span><span class="tag">Românească</span><span class="tag">Seafood</span></div>
        <div class="actions"><a class="btn btn-outline">Vezi profil</a><a class="btn btn-primary">Cere ofertă</a></div>
      </div>
    </article>

    <article class="card" data-city="cluj" data-tags="healthy family" data-name="ioana">
      <div class="photo"><img src="https://images.unsplash.com/photo-1526312426976-593c2b9998d7?q=80&w=800&auto=format&fit=crop" alt="Ioana"></div>
      <div class="body">
        <h3 style="margin:0 0 4px">Ioana</h3>
        <div class="muted">Cluj-Napoca • Healthy & Family • 6+ ani</div>
        <div class="rating"><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-stroke"></i><strong>4.8</strong></div>
        <div class="tags"><span class="tag">Healthy</span><span class="tag">Kids friendly</span></div>
        <div class="actions"><a class="btn btn-outline">Vezi profil</a><a class="btn btn-primary">Cere ofertă</a></div>
      </div>
    </article>

    <article class="card" data-city="brasov" data-tags="bbq corporate" data-name="marco">
      <div class="photo"><img src="https://images.unsplash.com/photo-1543007630-9710e4a00a20?q=80&w=800&auto=format&fit=crop" alt="Marco"></div>
      <div class="body">
        <h3 style="margin:0 0 4px">Marco</h3>
        <div class="muted">Brașov • Grill & Events • 12+ ani</div>
        <div class="rating"><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-stroke"></i><strong>4.7</strong></div>
        <div class="tags"><span class="tag">BBQ</span><span class="tag">Corporate</span></div>
        <div class="actions"><a class="btn btn-outline">Vezi profil</a><a class="btn btn-primary">Cere ofertă</a></div>
      </div>
    </article>

    <article class="card" data-city="sibiu" data-tags="fine italian" data-name="elisa">
      <div class="photo"><img src="https://images.unsplash.com/photo-1551218808-94e220e084d2?q=80&w=800&auto=format&fit=crop" alt="Elisa"></div>
      <div class="body">
        <h3 style="margin:0 0 4px">Elisa</h3>
        <div class="muted">Sibiu • Italian • 8+ ani</div>
        <div class="rating"><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-stroke"></i><strong>4.8</strong></div>
        <div class="tags"><span class="tag">Pasta</span><span class="tag">Seafood</span></div>
        <div class="actions"><a class="btn btn-outline">Vezi profil</a><a class="btn btn-primary">Cere ofertă</a></div>
      </div>
    </article>
  </div>
</main>

<script>
(() => {
  // Elemente UI
  const sheet        = document.getElementById('filterSheet');
  const overlay      = document.getElementById('sheetOverlay');
  const openBtn      = document.getElementById('btnOpenFilters');
  const closeBtn     = document.getElementById('btnCloseFilters');
  const chipsDesk    = document.getElementById('citiesChips');
  const chipsMobile  = document.getElementById('citiesChipsMobile');
  const searchInput  = document.getElementById('q');
  const resetBtn     = document.getElementById('btnReset');
  const grid         = document.getElementById('grid');
  const cards        = Array.from(grid.querySelectorAll('.card'));
  const resultsTop   = document.getElementById('resultsTop');

  // Stare filtre
  let state = { city:'all', q:'' };

  // Deschidere/închidere sheet (mobil)
  function openSheet(){
    sheet.classList.add('active'); overlay.classList.add('active');
    document.body.style.overflow='hidden';
  }
  function closeSheet(){
    sheet.classList.remove('active'); overlay.classList.remove('active');
    document.body.style.overflow='';
  }
  openBtn?.addEventListener('click', openSheet);
  closeBtn?.addEventListener('click', closeSheet);
  overlay?.addEventListener('click', closeSheet);

  // Utilitare
  function scrollToTop(){ resultsTop?.scrollIntoView({behavior:'smooth', block:'start'}); }
  function setActiveChip(groupEl, cityVal){
    groupEl.querySelectorAll('.chip[data-city]').forEach(c => c.classList.toggle('active', c.dataset.city===cityVal));
  }

  // Aplică filtrul pe listă
  function applyFilters(){
    const q = state.q.trim().toLowerCase();
    const city = state.city;

    cards.forEach(card=>{
      const inCity = (city==='all') || (card.dataset.city===city);
      const hay = (card.dataset.name + ' ' + (card.dataset.tags||'') + ' ' + (card.textContent||'')).toLowerCase();
      const inSearch = !q || hay.includes(q);
      card.style.display = (inCity && inSearch) ? 'block' : 'none';
    });
  }

  // Selectare oraș – DESKTOP: închide nimic (e bară deschisă)
  chipsDesk?.addEventListener('click', (e)=>{
    const chip = e.target.closest('.chip[data-city]'); if(!chip) return;
    state.city = chip.dataset.city;
    setActiveChip(chipsDesk, state.city);
    setActiveChip(chipsMobile, state.city); // sincronizează cu mobil
    applyFilters();
    scrollToTop(); // te duce sus la rezultate
  });

  // Selectare oraș – MOBIL: aplică + închide sheet
  chipsMobile?.addEventListener('click', (e)=>{
    const chip = e.target.closest('.chip[data-city]'); if(!chip) return;
    state.city = chip.dataset.city;
    setActiveChip(chipsMobile, state.city);
    setActiveChip(chipsDesk, state.city); // sincron desktop
    applyFilters();
    closeSheet();     // <- închide panoul
    scrollToTop();    // <- urcă la începutul listei
  });

  // Căutare
  searchInput?.addEventListener('input', ()=>{
    state.q = searchInput.value;
    applyFilters();
  });

  // Reset
  resetBtn?.addEventListener('click', ()=>{
    state = { city:'all', q:'' };
    searchInput.value='';
    setActiveChip(chipsDesk, 'all');
    setActiveChip(chipsMobile, 'all');
    applyFilters();
    scrollToTop();
  });

  // Init
  applyFilters();
})();
</script>
</body>
</html>

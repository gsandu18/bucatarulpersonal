<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard Bucătari – Profesional</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous"/>
  <style>
    body { font-family: 'Inter', sans-serif; background:#f5f7f8; margin:0; padding:0; }
    .container { max-width:1000px; margin:20px auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.08); }
    h2 { margin-top:0; font-size:20px; color:#0e5a43; }
    .note { background:#fff3cd; padding:12px; border-radius:8px; font-size:14px; margin-bottom:16px; }
    .collab-options { display:flex; gap:20px; margin-bottom:20px; }
    .option { flex:1; border:2px solid #ddd; border-radius:10px; padding:16px; cursor:pointer; transition:all .3s; }
    .option:hover { border-color:#0e5a43; background:#f9fffb; }
    .option.active { border-color:#0e5a43; background:#e6f4ef; }
    .option h3 { margin-top:0; font-size:16px; color:#0e5a43; }
    .option ul { padding-left:18px; font-size:14px; }
    .calculator { border-top:1px solid #eee; padding-top:20px; }
    .row { display:flex; gap:20px; margin-bottom:10px; }
    .row label { flex:1; font-size:14px; }
    .row input { flex:2; padding:8px; border:1px solid #ccc; border-radius:6px; }
    /* Categorie firma (PFA/SRL) */
    #row-categorie{ display:none; }
    #row-categorie select{ flex:2; padding:8px; border:1px solid #ccc; border-radius:6px; }
    .result { margin-top:15px; font-weight:600; font-size:15px; color:#000; }
    .contract-title{font-size:18px;font-weight:700;margin:0 0 10px;color:#0e5a43}
    .contract-section{margin:10px 0}
    .contract-meta{font-size:13px;color:#444}
  </style>
</head>
<body>
  <div class="container">
    <h2>Modalități de colaborare</h2>
    <div class="note">Alege varianta de colaborare cu platforma. Calculul este orientativ.</div>

    <div class="collab-options">
      <div class="option" id="opt-firma">
        <h3>Varianta 1 – Cu firmă (PFA/SRL)</h3>
        <ul>
          <li>Bucătarul emite factură către Platformă.</li>
          <li>Plata se face integral conform onorariului agreat, <b>minus comisionul</b> de platformă.</li>
        </ul>
      </div>
      <div class="option" id="opt-fara">
        <h3>Varianta 2 – Fără firmă</h3>
        <ul>
          <li>Plata prin <b>contract de colaborare</b> (persoană fizică).</li>
          <li>Onorariul net este diminuat cu <b>taxele legale</b>, suportate de Platformă.</li>
          <li>Se aplică același comision de platformă.</li>
        </ul>
      </div>
    </div>

    <div class="calculator">
      <h3>Calculator orientativ de încasare</h3>
      <div class="row">
        <label for="onorariu">Onorariu bucătar (brut)</label>
        <input type="number" id="onorariu" value="1500" />
      </div>
      <div class="row">
        <label for="comision">Comision platformă (%)</label>
        <input type="number" id="comision" value="20" />
      </div>
      <div class="row" id="row-taxe">
        <label for="taxe">Taxe legale (%)</label>
        <input type="number" id="taxe" value="0" />
      </div>
      <!-- Categorie firmă (vizibilă doar la varianta cu firmă) -->
      <div class="row" id="row-categorie">
        <label for="categorie">Categorie firmă</label>
        <select id="categorie">
          <option value="">Alege...</option>
          <option value="PFA">PFA</option>
          <option value="SRL">SRL</option>
        </select>
      </div>
      <div class="result" id="rezultat">Net estimat: 1.200 lei</div>
    </div>

    <!-- Formular colaborare -->
    <div class="calculator" id="formular-colaborare">
      <h3>Formular de colaborare</h3>
      <div class="note">Completează datele corespunzătoare variantei alese. Contractul se va genera automat cu aceste date.</div>

      <!-- FORM FIRMĂ (PFA / SRL) -->
      <div id="form-firma" style="display:none">
        <div class="row" id="row-categorie">
          <label for="categorie">Categorie firmă</label>
          <select id="categorie">
            <option value="">Alege...</option>
            <option value="PFA">PFA</option>
            <option value="SRL">SRL</option>
          </select>
        </div>
        <div class="row"><label for="firma-denumire">Denumire firmă / Nume titular</label><input id="firma-denumire"/></div>
        <div class="row"><label for="firma-cui">CUI / CIF (PFA: CNP)</label><input id="firma-cui"/></div>
        <div class="row"><label for="firma-reg">Nr. Reg. Com. / Nr. autorizație</label><input id="firma-reg"/></div>
        <div class="row"><label for="firma-sediu">Sediu social / Domiciliu</label><input id="firma-sediu"/></div>
        <div class="row"><label for="firma-repr">Reprezentant (SRL) / Titular (PFA)</label><input id="firma-repr"/></div>
        <div class="row"><label for="firma-email">Email</label><input id="firma-email" type="email"/></div>
        <div class="row"><label for="firma-tel">Telefon</label><input id="firma-tel"/></div>
        <div class="row"><label for="firma-iban">IBAN</label><input id="firma-iban"/></div>
        <div class="row"><label for="firma-banca">Banca</label><input id="firma-banca"/></div>
      </div>

      <!-- FORM PERSOANĂ FIZICĂ -->
      <div id="form-pf" style="display:none">
        <div class="row"><label for="pf-nume">Nume complet</label><input id="pf-nume"/></div>
        <div class="row"><label for="pf-cnp">CNP</label><input id="pf-cnp"/></div>
        <div class="row"><label for="pf-adresa">Adresă</label><input id="pf-adresa"/></div>
        <div class="row"><label for="pf-email">Email</label><input id="pf-email" type="email"/></div>
        <div class="row"><label for="pf-tel">Telefon</label><input id="pf-tel"/></div>
        <div class="row"><label for="pf-iban">IBAN (opțional)</label><input id="pf-iban"/></div>
        <div class="row"><label for="pf-banca">Banca (opțional)</label><input id="pf-banca"/></div>
      </div>

      <div class="row" style="justify-content:flex-start; gap:12px">
        <button class="btn btn-save" id="form-save" style="padding:10px 16px;border-radius:8px;border:1px solid #0e5a43;background:#0e5a43;color:#fff;font-weight:600">Salvează formular</button>
        <button class="btn" id="form-gen" style="padding:10px 16px;border-radius:8px;border:1px solid #0e5a43;background:#fff;color:#0e5a43;font-weight:600">Generează contract</button>
        <span id="form-msg" class="result" style="font-weight:500"></span>
      </div>
    </div>

  </div>

<script>
  const optFirma = document.getElementById('opt-firma');
  const optFara = document.getElementById('opt-fara');
  const rowTaxe = document.getElementById('row-taxe');
  const onorariuInput = document.getElementById('onorariu');
  const comisionInput = document.getElementById('comision');
  const taxeInput = document.getElementById('taxe');
  const rezultat = document.getElementById('rezultat');
  const rowCategorie = document.getElementById('row-categorie');
  const categorieSelect = document.getElementById('categorie');
  // Form containers & fields
  const formFirma = document.getElementById('form-firma');
  const formPF = document.getElementById('form-pf');
  const formSaveBtn = document.getElementById('form-save');
  const formGenBtn = document.getElementById('form-gen');
  const formMsg = document.getElementById('form-msg');
  // Firma fields
  const f_denumire = document.getElementById('firma-denumire');
  const f_cui = document.getElementById('firma-cui');
  const f_reg = document.getElementById('firma-reg');
  const f_sediu = document.getElementById('firma-sediu');
  const f_repr = document.getElementById('firma-repr');
  const f_email = document.getElementById('firma-email');
  const f_tel = document.getElementById('firma-tel');
  const f_iban = document.getElementById('firma-iban');
  const f_banca = document.getElementById('firma-banca');
  // PF fields
  const p_nume = document.getElementById('pf-nume');
  const p_cnp = document.getElementById('pf-cnp');
  const p_adresa = document.getElementById('pf-adresa');
  const p_email = document.getElementById('pf-email');
  const p_tel = document.getElementById('pf-tel');
  const p_iban = document.getElementById('pf-iban');
  const p_banca = document.getElementById('pf-banca');

  function calculeaza() {
    const onorariu = parseFloat(onorariuInput.value) || 0;
    const comision = parseFloat(comisionInput.value) || 0;
    const taxe = parseFloat(taxeInput.value) || 0;

    let dupaComision = onorariu - (onorariu * comision / 100);
    let net = dupaComision - (dupaComision * taxe / 100);

    rezultat.textContent = `Net estimat: ${net.toFixed(2)} lei`;
  }

  onorariuInput.addEventListener('input', calculeaza);
  comisionInput.addEventListener('input', calculeaza);
  taxeInput.addEventListener('input', calculeaza);
  categorieSelect.addEventListener('change', ()=>{
    localStorage.setItem('FIRMA_CATEGORIE', categorieSelect.value || '');
  });

  // ===== Persistență formular & contract =====
  function saveForms(){
    const type = localStorage.getItem('COLAB_TYPE')||'firma';
    if(type==='firma'){
      const data={categorie:categorieSelect.value,denumire:f_denumire.value,cui:f_cui.value,reg:f_reg.value,sediu:f_sediu.value,repr:f_repr.value,email:f_email.value,tel:f_tel.value,iban:f_iban.value,banca:f_banca.value};
      localStorage.setItem('FORM_FIRMA', JSON.stringify(data));
      return data;
    } else {
      const data={nume:p_nume.value,cnp:p_cnp.value,adresa:p_adresa.value,email:p_email.value,tel:p_tel.value,iban:p_iban.value,banca:p_banca.value};
      localStorage.setItem('FORM_PF', JSON.stringify(data));
      return data;
    }
  }
  function loadForms(){
    const type = localStorage.getItem('COLAB_TYPE')||'firma';
    if(type==='firma'){
      const d=JSON.parse(localStorage.getItem('FORM_FIRMA')||'{}');
      if(d.categorie) categorieSelect.value=d.categorie;
      f_denumire.value=d.denumire||''; f_cui.value=d.cui||''; f_reg.value=d.reg||''; f_sediu.value=d.sediu||''; f_repr.value=d.repr||''; f_email.value=d.email||''; f_tel.value=d.tel||''; f_iban.value=d.iban||''; f_banca.value=d.banca||'';
    } else {
      const d=JSON.parse(localStorage.getItem('FORM_PF')||'{}');
      p_nume.value=d.nume||''; p_cnp.value=d.cnp||''; p_adresa.value=d.adresa||''; p_email.value=d.email||''; p_tel.value=d.tel||''; p_iban.value=d.iban||''; p_banca.value=d.banca||'';
    }
  }
  formSaveBtn.addEventListener('click', (e)=>{ e.preventDefault(); const d=saveForms(); formMsg.textContent='Formular salvat.'; });

  function contractHTML(){
    const type = localStorage.getItem('COLAB_TYPE')||'firma';
    const today = new Date().toLocaleDateString('ro-RO');
    if(type==='firma'){
      const d=JSON.parse(localStorage.getItem('FORM_FIRMA')||'{}');
      const cat=d.categorie||'PFA';
      return `<!doctype html><html><head><meta charset="utf-8"><title>Contract colaborare</title><style>body{font-family:Inter,Arial,sans-serif;padding:24px;line-height:1.45} h1{font-size:20px;color:#0e5a43} h2{font-size:16px;margin-top:18px} .meta{color:#555;font-size:13px}</style></head><body>
      <h1>Contract de colaborare – ${cat}</h1>
      <div class="meta">Data: ${today}</div>
      <h2>Părți</h2>
      <p><b>${d.denumire||'[denumire]'}</b>, ${cat}, CUI/CIF ${d.cui||'-'}, Reg. ${d.reg||'-'}, cu sediul în ${d.sediu||'-'}, reprezentată de ${d.repr||'-'}, denumită în continuare „Colaborator”.</p>
      <p>și Platforma „Bucătarul Personal”, denumită în continuare „Platforma”.</p>
      <h2>Obiect</h2>
      <p>Prestarea de servicii culinare pentru clienții Platformei, conform comenzilor acceptate.</p>
      <h2>Plăți</h2>
      <p>Plata se efectuează conform onorariului agreat, din care se reține comisionul Platformei. IBAN: ${d.iban||'-'}, Banca: ${d.banca||'-'}.</p>
      <h2>Contact</h2>
      <p>Email: ${d.email||'-'} • Telefon: ${d.tel||'-'}</p>
      <br><br>
      <p>Semnături:</p>
      <p>Colaborator: _______________________ &nbsp;&nbsp; Platforma: _______________________</p>
      </body></html>`;
    } else {
      const d=JSON.parse(localStorage.getItem('FORM_PF')||'{}');
      return `<!doctype html><html><head><meta charset="utf-8"><title>Contract colaborare PF</title><style>body{font-family:Inter,Arial,sans-serif;padding:24px;line-height:1.45} h1{font-size:20px;color:#0e5a43} h2{font-size:16px;margin-top:18px} .meta{color:#555;font-size:13px}</style></head><body>
      <h1>Contract de colaborare – Persoană fizică</h1>
      <div class="meta">Data: ${today}</div>
      <h2>Părți</h2>
      <p><b>${d.nume||'[nume complet]'}</b>, CNP ${d.cnp||'-'}, domiciliat(ă) în ${d.adresa||'-'}, denumit(ă) „Colaborator”.</p>
      <p>și Platforma „Bucătarul Personal”, denumită în continuare „Platforma”.</p>
      <h2>Obiect</h2>
      <p>Prestarea de servicii culinare pentru clienții Platformei, conform comenzilor acceptate.</p>
      <h2>Plăți</h2>
      <p>Plata netă se calculează după reținerea comisionului și taxelor legale. IBAN: ${d.iban||'-'}, Banca: ${d.banca||'-'}.</p>
      <h2>Contact</h2>
      <p>Email: ${d.email||'-'} • Telefon: ${d.tel||'-'}</p>
      <br><br>
      <p>Semnături:</p>
      <p>Colaborator: _______________________ &nbsp;&nbsp; Platforma: _______________________</p>
      </body></html>`;
    }
  }
  formGenBtn.addEventListener('click',(e)=>{ e.preventDefault(); saveForms(); const html=contractHTML(); const w=window.open('about:blank','_blank'); if(!w){ alert('Deblochează pop‑up-urile pentru a vedea contractul.'); return;} w.document.write(html); w.document.close(); try{ w.focus(); w.print(); }catch(_){} });

  function applyTypeUI(){ const t=localStorage.getItem('COLAB_TYPE')||'firma'; if(t==='firma'){ formFirma.style.display='block'; formPF.style.display='none'; rowCategorie.style.display='flex'; } else { formFirma.style.display='none'; formPF.style.display='block'; rowCategorie.style.display='none'; } loadForms(); }

  // inițial – după selectarea tipului (în optFirma/optFara), se setează în localStorage; aici doar sincronizăm UI
  applyTypeUI();

  optFirma.addEventListener('click', () => {
    optFirma.classList.add('active');
    optFara.classList.remove('active');
    rowTaxe.style.display = 'none';
    taxeInput.value = 0;
    rowCategorie.style.display = 'flex';
    formFirma.style.display = 'block';
    formPF.style.display = 'none';
    localStorage.setItem('COLAB_TYPE','firma');
    calculeaza();
  });

  optFara.addEventListener('click', () => {
    optFara.classList.add('active');
    optFirma.classList.remove('active');
    rowTaxe.style.display = 'flex';
    rowCategorie.style.display = 'none';
    formFirma.style.display = 'none';
    formPF.style.display = 'block';
    localStorage.setItem('COLAB_TYPE','fara');
    calculeaza();
  });

  // init din localStorage (tip colaborare + categorie)
  const savedType = localStorage.getItem('COLAB_TYPE') || 'firma';
  if(savedType==='fara'){ optFara.click(); } else { optFirma.click(); }
  const savedCat = localStorage.getItem('FIRMA_CATEGORIE');
  if(savedCat){ categorieSelect.value = savedCat; }
</script>
</body>
</html>
